<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - AspNetCore8Test(20250804-01)</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/AspNetCore8Test.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    
    <!-- 地政士系統下拉選單樣式 -->
    <style>
        /* 支援多層下拉選單 */
        .nav-item.dropend .dropdown-menu {
            top: 0;
            left: 100%;
            margin-top: 0;
            margin-left: 0.125rem;
        }
        
        /* 子選單箭頭指示器 */
        .dropdown-item.dropdown-toggle::after {
            border-left: 0.3em solid;
            border-right: 0;
            border-bottom: 0.3em solid transparent;
            border-top: 0.3em solid transparent;
            margin-left: auto;
        }
        
        /* 改善下拉選單的視覺效果 */
        .dropdown-menu {
            border: 1px solid rgba(0,0,0,.125);
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }
        
        .dropdown-header {
            font-size: 0.75rem;
            font-weight: 600;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        /* 子選單項目的間距調整 */
        .dropdown-menu .dropdown-menu .dropdown-item {
            padding-left: 1.5rem;
            font-size: 0.9rem;
        }
        
        /* hover 效果增強 */
        .dropdown-item:hover {
            background-color: #f8f9fa;
            color: #212529;
        }
        
        /* 圖示間距調整 */
        .dropdown-item i {
            width: 1.2em;
            text-align: center;
        }
    </style>
    
    @await RenderSectionAsync("Styles", required: false)
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
            <div class="container-fluid">
                <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">AspNetCore8Test</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
                    <ul class="navbar-nav flex-grow-1">
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Index">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-controller="Approval" asp-action="Index">
                                <i class="fas fa-clipboard-check me-1"></i>簽核管理
                            </a>
                        </li>
                        <li class="nav-item dropdown">
                            <button class="btn nav-link dropdown-toggle text-dark border-0 bg-transparent" id="parkDropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-tree me-1"></i>碧湖公園管理
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="parkDropdown">
                                <li><a class="dropdown-item" asp-controller="Park" asp-action="Index">
                                    <i class="fas fa-tachometer-alt me-2"></i>管理首頁
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" asp-controller="Park" asp-action="Facilities">
                                    <i class="fas fa-tools me-2"></i>設施管理
                                </a></li>
                                <li><a class="dropdown-item" asp-controller="Park" asp-action="Plants">
                                    <i class="fas fa-seedling me-2"></i>植栽管理
                                </a></li>
                                <li><a class="dropdown-item" asp-controller="Park" asp-action="Environmental">
                                    <i class="fas fa-thermometer-half me-2"></i>環境監測
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" asp-controller="Park" asp-action="Visitors">
                                    <i class="fas fa-users me-2"></i>遊客服務
                                </a></li>
                                <li><a class="dropdown-item" asp-controller="Park" asp-action="Activities">
                                    <i class="fas fa-calendar-alt me-2"></i>活動管理
                                </a></li>
                                <li><a class="dropdown-item" asp-controller="Park" asp-action="Feedback">
                                    <i class="fas fa-comments me-2"></i>回饋管理
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" asp-controller="Park" asp-action="Security">
                                    <i class="fas fa-shield-alt me-2"></i>安全監控
                                </a></li>
                                <li><a class="dropdown-item" asp-controller="Park" asp-action="Analytics">
                                    <i class="fas fa-chart-bar me-2"></i>數據分析
                                </a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <button class="btn nav-link dropdown-toggle text-dark border-0 bg-transparent" id="gasDropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-fire me-1"></i>天然氣管理
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="gasDropdown">
                                <li><a class="dropdown-item" asp-controller="Dashboard" asp-action="Index">
                                    <i class="fas fa-tachometer-alt me-2"></i>系統儀表板
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" asp-controller="Customer" asp-action="Index">
                                    <i class="fas fa-users me-2"></i>客戶管理
                                </a></li>
                                <li><a class="dropdown-item" asp-controller="Billing" asp-action="Index">
                                    <i class="fas fa-file-invoice-dollar me-2"></i>帳單管理
                                </a></li>
                                <li><a class="dropdown-item" asp-controller="Pipeline" asp-action="Index">
                                    <i class="fas fa-project-diagram me-2"></i>管線監控
                                </a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <button class="btn nav-link dropdown-toggle text-dark border-0 bg-transparent" id="landSurveyorDropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-map me-1"></i>地政士系統
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="landSurveyorDropdown">
                                <li><a class="dropdown-item" asp-controller="LandSurveyorDashboard" asp-action="Index">
                                    <i class="fas fa-tachometer-alt me-2"></i>系統儀表板
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                
                                <!-- 客戶管理子選單 -->
                                <li class="nav-item dropend">
                                    <button class="btn dropdown-item dropdown-toggle border-0 bg-transparent text-start w-100" id="customerDropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fas fa-users me-2"></i>客戶管理
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="customerDropdown">
                                        <li><a class="dropdown-item" asp-controller="LandSurveyorCustomer" asp-action="Index">
                                            <i class="fas fa-list me-2"></i>客戶清單
                                        </a></li>
                                        <li><a class="dropdown-item" asp-controller="LandSurveyorCustomer" asp-action="Create">
                                            <i class="fas fa-user-plus me-2"></i>新增客戶
                                        </a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('客戶分析功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('客戶分析功能開發中...')">
                                            <i class="fas fa-chart-pie me-2"></i>客戶分析
                                        </button></li>
                                    </ul>
                                </li>

                                <!-- 案件管理子選單 -->
                                <li class="nav-item dropend">
                                    <button class="btn dropdown-item dropdown-toggle border-0 bg-transparent text-start w-100" id="caseDropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fas fa-folder me-2"></i>案件管理
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="caseDropdown">
                                        <li><a class="dropdown-item" asp-controller="Case" asp-action="Index">
                                            <i class="fas fa-list me-2"></i>案件清單
                                        </a></li>
                                        <li><a class="dropdown-item" asp-controller="Case" asp-action="Create">
                                            <i class="fas fa-folder-plus me-2"></i>新增案件
                                        </a></li>
                                        <li><a class="dropdown-item" asp-controller="CaseProgress" asp-action="Index">
                                            <i class="fas fa-tasks me-2"></i>案件進度
                                        </a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><h6 class="dropdown-header">案件類型</h6></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="filterCasesByType('OwnershipTransfer')" onkeydown="if(event.key==='Enter'||event.key===' ') filterCasesByType('OwnershipTransfer')">
                                            <i class="fas fa-exchange-alt me-2"></i>所有權移轉
                                        </button></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="filterCasesByType('MortgageRegistration')" onkeydown="if(event.key==='Enter'||event.key===' ') filterCasesByType('MortgageRegistration')">
                                            <i class="fas fa-home me-2"></i>抵押權設定
                                        </button></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="filterCasesByType('Survey')" onkeydown="if(event.key==='Enter'||event.key===' ') filterCasesByType('Survey')">
                                            <i class="fas fa-ruler-combined me-2"></i>測量案件
                                        </button></li>
                                    </ul>
                                </li>

                                <li><hr class="dropdown-divider"></li>

                                <!-- 不動產登記子選單 -->
                                <li class="nav-item dropend">
                                    <button class="btn dropdown-item dropdown-toggle border-0 bg-transparent text-start w-100" id="realEstateDropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fas fa-home me-2"></i>不動產登記
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="realEstateDropdown">
                                        <li><a class="dropdown-item" asp-controller="RealEstateRegistrations" asp-action="Index">
                                            <i class="fas fa-list me-2"></i>登記清單
                                        </a></li>
                                        <li><a class="dropdown-item" asp-controller="RealEstateRegistrations" asp-action="Create">
                                            <i class="fas fa-plus me-2"></i>新增登記
                                        </a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><h6 class="dropdown-header">登記類型</h6></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('土地登記功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('土地登記功能開發中...')">
                                            <i class="fas fa-mountain me-2"></i>土地登記
                                        </button></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('建物登記功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('建物登記功能開發中...')">
                                            <i class="fas fa-building me-2"></i>建物登記
                                        </button></li>
                                    </ul>
                                </li>

                                <!-- 預約管理子選單 -->
                                <li class="nav-item dropend">
                                    <button class="btn dropdown-item dropdown-toggle border-0 bg-transparent text-start w-100" id="appointmentDropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fas fa-calendar-check me-2"></i>預約管理
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="appointmentDropdown">
                                        <li><a class="dropdown-item" asp-controller="Appointment" asp-action="Index">
                                            <i class="fas fa-list me-2"></i>預約清單
                                        </a></li>
                                        <li><a class="dropdown-item" asp-controller="Appointment" asp-action="Create">
                                            <i class="fas fa-calendar-plus me-2"></i>新增預約
                                        </a></li>
                                        <li><a class="dropdown-item" asp-controller="Appointment" asp-action="Calendar">
                                            <i class="fas fa-calendar me-2"></i>行事曆檢視
                                        </a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><h6 class="dropdown-header">快速檢視</h6></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="viewTodayAppointments()" onkeydown="if(event.key==='Enter'||event.key===' ') viewTodayAppointments()">
                                            <i class="fas fa-calendar-day me-2"></i>今日預約
                                        </button></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="viewWeekAppointments()" onkeydown="if(event.key==='Enter'||event.key===' ') viewWeekAppointments()">
                                            <i class="fas fa-calendar-week me-2"></i>本週預約
                                        </button></li>
                                    </ul>
                                </li>

                                <li><hr class="dropdown-divider"></li>

                                <!-- 財務管理子選單 -->
                                <li class="nav-item dropend">
                                    <button class="btn dropdown-item dropdown-toggle border-0 bg-transparent text-start w-100" id="financeDropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fas fa-dollar-sign me-2"></i>財務管理
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="financeDropdown">
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('收費管理功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('收費管理功能開發中...')">
                                            <i class="fas fa-money-bill me-2"></i>收費管理
                                        </button></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('發票管理功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('發票管理功能開發中...')">
                                            <i class="fas fa-file-invoice me-2"></i>發票管理
                                        </button></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('應收帳款功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('應收帳款功能開發中...')">
                                            <i class="fas fa-coins me-2"></i>應收帳款
                                        </button></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('財務報表功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('財務報表功能開發中...')">
                                            <i class="fas fa-chart-bar me-2"></i>財務報表
                                        </button></li>
                                    </ul>
                                </li>

                                <!-- 文件管理子選單 -->
                                <li class="nav-item dropend">
                                    <button class="btn dropdown-item dropdown-toggle border-0 bg-transparent text-start w-100" id="documentDropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fas fa-file-alt me-2"></i>文件管理
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="documentDropdown">
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('文件庫功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('文件庫功能開發中...')">
                                            <i class="fas fa-archive me-2"></i>文件庫
                                        </button></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('範本管理功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('範本管理功能開發中...')">
                                            <i class="fas fa-file-contract me-2"></i>範本管理
                                        </button></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('文件掃描功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('文件掃描功能開發中...')">
                                            <i class="fas fa-scanner me-2"></i>文件掃描
                                        </button></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('文件搜尋功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('文件搜尋功能開發中...')">
                                            <i class="fas fa-search me-2"></i>文件搜尋
                                        </button></li>
                                    </ul>
                                </li>

                                <!-- 報表分析子選單 -->
                                <li class="nav-item dropend">
                                    <button class="btn dropdown-item dropdown-toggle border-0 bg-transparent text-start w-100" id="reportDropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fas fa-chart-bar me-2"></i>報表分析
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="reportDropdown">
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('業務統計功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('業務統計功能開發中...')">
                                            <i class="fas fa-chart-pie me-2"></i>業務統計
                                        </button></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('收入分析功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('收入分析功能開發中...')">
                                            <i class="fas fa-chart-line me-2"></i>收入分析
                                        </button></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('客戶分析功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('客戶分析功能開發中...')">
                                            <i class="fas fa-users-cog me-2"></i>客戶分析
                                        </button></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><button class="btn dropdown-item border-0 bg-transparent text-start w-100" type="button" onclick="alert('自訂報表功能開發中...')" onkeydown="if(event.key==='Enter'||event.key===' ') alert('自訂報表功能開發中...')">
                                            <i class="fas fa-file-export me-2"></i>自訂報表
                                        </button></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer class="border-top footer text-muted">
        <div class="container">
            &copy; 2025 - AspNetCore8Test - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
        </div>
    </footer>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    
    <!-- 地政士系統選單功能 -->
    <script>
        // 案件類型篩選功能
        function filterCasesByType(caseType) {
            window.location.href = '@Url.Action("Index", "Cases")?caseType=' + caseType;
        }
        
        // 今日預約檢視
        function viewTodayAppointments() {
            var today = new Date().toISOString().split('T')[0];
            window.location.href = '@Url.Action("Index", "Appointments")?selectedDate=' + today;
        }
        
        // 本週預約檢視
        function viewWeekAppointments() {
            window.location.href = '@Url.Action("Calendar", "Appointments")';
        }
        
        // 支援 dropend 子選單
        $(document).ready(function() {
            // 為 dropend 子選單添加 hover 效果
            $('.nav-item.dropend').hover(
                function() {
                    $(this).find('.dropdown-menu').addClass('show');
                },
                function() {
                    $(this).find('.dropdown-menu').removeClass('show');
                }
            );
            
            // 防止子選單點擊時關閉父選單
            $('.dropdown-menu .dropdown-item.dropdown-toggle').on('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                var $subMenu = $(this).next('.dropdown-menu');
                if ($subMenu.hasClass('show')) {
                    $subMenu.removeClass('show');
                } else {
                    $('.dropdown-menu .dropdown-menu').removeClass('show');
                    $subMenu.addClass('show');
                }
            });
            
            // 點擊外部時關閉所有子選單
            $(document).on('click', function() {
                $('.dropdown-menu .dropdown-menu').removeClass('show');
            });
        });
    </script>
    
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
