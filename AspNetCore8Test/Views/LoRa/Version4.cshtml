@{
    ViewData["Title"] = "LoRa管理系統(四)";
    Layout = "_Layout";
}

<div class="container-fluid lora-v4 text-white">
    <div class="command-header mb-4 p-4 rounded-4">
        <div class="d-flex flex-column flex-lg-row justify-content-between align-items-lg-center gap-3">
            <div>
                <h2 class="fw-bold mb-2"><i class="fas fa-satellite me-2"></i>LoRa 管理系統 - 指揮中心版</h2>
                <p class="mb-0 text-white-50">結合全域監控、AI 自動化與戰情板設計，呈現營運指揮中心的視覺感受。</p>
            </div>
            <div class="d-flex gap-3">
                <div class="status-card">
                    <span class="label">系統狀態</span>
                    <span class="value text-success"><i class="fas fa-circle"></i> 正常</span>
                </div>
                <div class="status-card">
                    <span class="label">版本</span>
                    <span class="value">4.0 指揮</span>
                </div>
                <div class="status-card">
                    <span class="label">監控區域</span>
                    <span class="value">全球 6 區</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 關鍵指標 -->
    <div class="row g-3 mb-4">
        <div class="col-xl-3 col-md-6">
            <div class="info-tile gradient-blue">
                <div class="label">在線閘道器</div>
                <div class="value">54</div>
                <div class="meta text-white-50">+5 vs 昨日</div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="info-tile gradient-green">
                <div class="label">平均封包成功率</div>
                <div class="value">99.1%</div>
                <div class="meta text-white-50">最高 99.7%</div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="info-tile gradient-orange">
                <div class="label">AI 預測異常</div>
                <div class="value">4</div>
                <div class="meta text-white-50">2 件須確認</div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="info-tile gradient-red">
                <div class="label">告警等級</div>
                <div class="value">Level 2</div>
                <div class="meta text-white-50">最新：干擾上升</div>
            </div>
        </div>
    </div>

    <div class="row g-4">
        <div class="col-xxl-7">
            <div class="module-card h-100">
                <div class="module-header">
                    <h5 class="mb-0"><i class="fas fa-globe-asia me-2"></i>全球戰情概覽</h5>
                    <span class="badge bg-primary text-uppercase">Realtime</span>
                </div>
                <div class="module-body">
                    <div class="world-map mb-4"></div>
                    <div class="row g-3 small">
                        <div class="col-md-4">
                            <div class="border-start border-3 border-info ps-3">
                                <div class="text-white-50">北美</div>
                                <div class="fw-bold">18 閘道器</div>
                                <div class="text-success">穩定</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="border-start border-3 border-warning ps-3">
                                <div class="text-white-50">亞太</div>
                                <div class="fw-bold">22 閘道器</div>
                                <div class="text-warning">監控中</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="border-start border-3 border-danger ps-3">
                                <div class="text-white-50">歐洲</div>
                                <div class="fw-bold">14 閘道器</div>
                                <div class="text-danger">干擾偏高</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xxl-5">
            <div class="module-card h-100">
                <div class="module-header">
                    <h5 class="mb-0"><i class="fas fa-robot me-2"></i>自動化策略控制</h5>
                    <span class="badge bg-info text-dark">AI Orchestrator</span>
                </div>
                <div class="module-body">
                    <div class="form-check form-switch text-white-50 mb-3">
                        <input class="form-check-input" type="checkbox" checked>
                        <label class="form-check-label text-white" for="">動態頻譜管理</label>
                        <small class="d-block">依據干擾指標自動切換最佳信道。</small>
                    </div>
                    <div class="form-check form-switch text-white-50 mb-3">
                        <input class="form-check-input" type="checkbox" checked>
                        <label class="form-check-label text-white">節點省電模式</label>
                        <small class="d-block">智慧調整感測頻率，延長電池壽命。</small>
                    </div>
                    <div class="form-check form-switch text-white-50 mb-3">
                        <input class="form-check-input" type="checkbox">
                        <label class="form-check-label text-white">自動派工流程</label>
                        <small class="d-block">自動生成維運任務並推播至現場人員。</small>
                    </div>
                    <div class="alert alert-warning bg-opacity-25 border-warning text-warning" role="alert">
                        <i class="fas fa-exclamation-triangle me-2"></i> 建議開啟「自動派工流程」，以縮短事件處理時間 25%。
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row g-4 mt-1">
        <div class="col-xl-4">
            <div class="module-card h-100">
                <div class="module-header">
                    <h5 class="mb-0"><i class="fas fa-shield-alt me-2"></i>資安態勢</h5>
                    <span class="badge bg-danger">重點關注</span>
                </div>
                <div class="module-body">
                    <ul class="list-unstyled mb-0 small">
                        <li class="mb-3">
                            <span class="fw-semibold">異常登入</span>
                            <span class="badge bg-danger ms-2">5</span>
                            <div class="text-white-50">來源：歐洲節點 (已隔離)</div>
                        </li>
                        <li class="mb-3">
                            <span class="fw-semibold">韌體簽章驗證</span>
                            <span class="badge bg-success ms-2">正常</span>
                            <div class="text-white-50">所有更新皆通過 Hash 驗證</div>
                        </li>
                        <li>
                            <span class="fw-semibold">VPN 通道</span>
                            <span class="badge bg-warning text-dark ms-2">負載 67%</span>
                            <div class="text-white-50">建議評估擴充帶寬</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-xl-4">
            <div class="module-card h-100">
                <div class="module-header">
                    <h5 class="mb-0"><i class="fas fa-clipboard-check me-2"></i>作業手冊速覽</h5>
                    <span class="badge bg-secondary">SOP</span>
                </div>
                <div class="module-body small">
                    <ol class="ps-3 mb-0">
                        <li class="mb-2">確認戰情板告警優先順序並指派指揮官。</li>
                        <li class="mb-2">檢視 AI 建議策略，調整自動化排程。</li>
                        <li class="mb-2">同步現場維運與安全團隊資訊。</li>
                        <li>產生回報文件並備份至雲端。</li>
                    </ol>
                </div>
            </div>
        </div>
        <div class="col-xl-4">
            <div class="module-card h-100">
                <div class="module-header">
                    <h5 class="mb-0"><i class="fas fa-terminal me-2"></i>即時系統日誌</h5>
                    <span class="badge bg-light text-dark">Log Stream</span>
                </div>
                <div class="module-body">
                    <div class="log-window">
                        <div>[09:20:12] Gateway-EU-14 信號干擾值上升。</div>
                        <div>[09:18:05] AI 預測：北美區電池壽命剩餘 20%。</div>
                        <div>[09:15:44] 任務派工：派出維運小隊 S2 至亞太區。</div>
                        <div>[09:14:08] OTA 更新成功：韌體 v4.1.0。</div>
                        <div>[09:10:30] 安全提醒：異常登入嘗試已封鎖。</div>
                    </div>
                    <small class="text-white-50">資料為範例，可串接真實日誌串流服務。</small>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <style>
        .lora-v4 {
            background: radial-gradient(circle at top left, rgba(69, 155, 255, 0.25), transparent 55%), #0b1625;
            min-height: 100vh;
            padding-bottom: 2.5rem;
        }

        .command-header {
            background: linear-gradient(135deg, rgba(28, 37, 65, 0.9), rgba(26, 61, 114, 0.9));
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .status-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 0.75rem;
            padding: 0.75rem 1rem;
            min-width: 130px;
            text-align: center;
        }

        .status-card .label {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.55);
            display: block;
        }

        .status-card .value {
            font-weight: 600;
        }

        .info-tile {
            border-radius: 1rem;
            padding: 1.5rem;
            height: 100%;
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.08);
        }

        .info-tile .label {
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            color: rgba(255, 255, 255, 0.55);
        }

        .info-tile .value {
            font-size: 2.3rem;
            font-weight: 700;
        }

        .info-tile.gradient-blue {
            background: linear-gradient(135deg, rgba(76, 175, 255, 0.85), rgba(47, 128, 237, 0.95));
        }

        .info-tile.gradient-green {
            background: linear-gradient(135deg, rgba(45, 203, 112, 0.85), rgba(29, 160, 87, 0.95));
        }

        .info-tile.gradient-orange {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.9), rgba(255, 140, 0, 0.9));
        }

        .info-tile.gradient-red {
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.9), rgba(199, 0, 57, 0.95));
        }

        .module-card {
            background: rgba(12, 24, 42, 0.85);
            border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 1.5rem 3rem rgba(5, 14, 24, 0.5);
            display: flex;
            flex-direction: column;
        }

        .module-header {
            padding: 1.25rem 1.5rem 0.75rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .module-body {
            padding: 1.5rem;
            flex: 1;
        }

        .world-map {
            height: 220px;
            border-radius: 0.85rem;
            background: radial-gradient(circle at center, rgba(0, 180, 255, 0.35), transparent 65%), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400" fill="none" stroke="rgba(255,255,255,0.08)" stroke-width="2"><path d="M83 160l42 26 46-32 38 14 53-28 59 17 60-35 41 7 54-21 30 33 52-8 44 18 27-9 34 31 40-20 41 22"/></svg>');
            background-size: cover;
            border: 1px solid rgba(255, 255, 255, 0.12);
        }

        .form-check-input:checked {
            background-color: #1cc88a;
            border-color: #1cc88a;
        }

        .form-check-input {
            cursor: pointer;
        }

        .alert.bg-opacity-25 {
            background-color: rgba(255, 193, 7, 0.15) !important;
        }

        .log-window {
            background: rgba(9, 20, 35, 0.95);
            border-radius: 0.75rem;
            padding: 1rem;
            font-family: "Fira Code", "Consolas", monospace;
            font-size: 0.85rem;
            line-height: 1.5;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .log-window::-webkit-scrollbar {
            width: 6px;
        }

        .log-window::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }
    </style>
}
