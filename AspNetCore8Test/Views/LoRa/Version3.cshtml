@{
    ViewData["Title"] = "LoRa管理系統(三)";
    Layout = "_Layout";
}

<div class="container-fluid lora-v3">
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-0 shadow-sm glass-panel">
                <div class="card-body p-4">
                    <div class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3">
                        <div>
                            <h2 class="fw-bold mb-2 text-primary"><i class="fas fa-chart-network me-2"></i>LoRa 管理系統 - 空間分析版本</h2>
                            <p class="mb-0 text-muted">結合地理資訊、生命週期管理以及策略儀表板，模擬多維度整合的管理情境。</p>
                        </div>
                        <div class="d-flex gap-3">
                            <div class="stat-chip">
                                <span class="label">節點總數</span>
                                <span class="value">1,850</span>
                            </div>
                            <div class="stat-chip">
                                <span class="label">生命週期健康</span>
                                <span class="value text-success"><i class="fas fa-heartbeat"></i> 87%</span>
                            </div>
                            <div class="stat-chip">
                                <span class="label">版本</span>
                                <span class="value">3.0 分析</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-12">
            <ul class="nav nav-pills flex-wrap gap-2">
                <li class="nav-item"><span class="nav-link active"><i class="fas fa-layer-group me-1"></i>資產佈署</span></li>
                <li class="nav-item"><span class="nav-link"><i class="fas fa-sync-alt me-1"></i>生命週期</span></li>
                <li class="nav-item"><span class="nav-link"><i class="fas fa-user-shield me-1"></i>安全監控</span></li>
                <li class="nav-item"><span class="nav-link"><i class="fas fa-flask me-1"></i>實驗功能</span></li>
                <li class="nav-item"><span class="nav-link"><i class="fas fa-cloud-upload-alt me-1"></i>整合 API</span></li>
            </ul>
        </div>
    </div>

    <div class="row g-4">
        <!-- 空間分布分析 -->
        <div class="col-xl-8">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center">
                    <h5 class="mb-0 fw-bold"><i class="fas fa-map-marked-alt me-2 text-primary"></i>空間熱區偵測</h5>
                    <span class="badge bg-primary-subtle text-primary">Last Sync 5 mins ago</span>
                </div>
                <div class="card-body">
                    <div class="heatmap-placeholder mb-3"></div>
                    <div class="row text-center small text-muted">
                        <div class="col">
                            <span class="legend-dot bg-success"></span> 穩定區域
                        </div>
                        <div class="col">
                            <span class="legend-dot bg-warning"></span> 觀察區域
                        </div>
                        <div class="col">
                            <span class="legend-dot bg-danger"></span> 高風險區域
                        </div>
                    </div>
                    <p class="mt-3 mb-0 text-muted small">熱區圖以模擬資料呈現，實務上可串接 GIS 圖資服務或自建地圖模組。</p>
                </div>
            </div>
        </div>

        <!-- 生命週期 -->
        <div class="col-xl-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-header bg-transparent border-0">
                    <h5 class="mb-0 fw-bold"><i class="fas fa-recycle me-2 text-success"></i>設備生命週期</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled life-cycle">
                        <li>
                            <span class="stage">部署階段</span>
                            <div class="progress flex-grow-1">
                                <div class="progress-bar bg-info" style="width: 100%"></div>
                            </div>
                            <span class="ratio">完成</span>
                        </li>
                        <li>
                            <span class="stage">啟用測試</span>
                            <div class="progress flex-grow-1">
                                <div class="progress-bar bg-success" style="width: 92%"></div>
                            </div>
                            <span class="ratio">92%</span>
                        </li>
                        <li>
                            <span class="stage">穩定運行</span>
                            <div class="progress flex-grow-1">
                                <div class="progress-bar bg-primary" style="width: 76%"></div>
                            </div>
                            <span class="ratio">76%</span>
                        </li>
                        <li>
                            <span class="stage">優化升級</span>
                            <div class="progress flex-grow-1">
                                <div class="progress-bar bg-warning text-dark" style="width: 54%"></div>
                            </div>
                            <span class="ratio">54%</span>
                        </li>
                        <li>
                            <span class="stage">退役汰換</span>
                            <div class="progress flex-grow-1">
                                <div class="progress-bar bg-danger" style="width: 18%"></div>
                            </div>
                            <span class="ratio">18%</span>
                        </li>
                    </ul>
                    <p class="small text-muted mb-0">此區塊示範不同生命週期階段的總覽，可延伸為互動式圖表或 KPI 指標。</p>
                </div>
            </div>
        </div>
    </div>

    <div class="row g-4 mt-1">
        <div class="col-xl-5">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-header bg-transparent border-0">
                    <h5 class="mb-0 fw-bold"><i class="fas fa-project-diagram me-2 text-secondary"></i>LoRa 應用領域概況</h5>
                </div>
                <div class="card-body">
                    <table class="table align-middle mb-0 table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>領域</th>
                                <th>節點數</th>
                                <th>上月成長</th>
                                <th>備註</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><i class="fas fa-city text-primary me-2"></i>智慧城市</td>
                                <td>620</td>
                                <td><span class="text-success"><i class="fas fa-arrow-up"></i> 12%</span></td>
                                <td>新增停車感測專案</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-industry text-secondary me-2"></i>智慧工廠</td>
                                <td>430</td>
                                <td><span class="text-success"><i class="fas fa-arrow-up"></i> 6%</span></td>
                                <td>導入環境監測</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-leaf text-success me-2"></i>智慧農業</td>
                                <td>520</td>
                                <td><span class="text-warning"><i class="fas fa-minus"></i> 1%</span></td>
                                <td>進行季節性調整</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-ship text-info me-2"></i>港口物流</td>
                                <td>180</td>
                                <td><span class="text-success"><i class="fas fa-arrow-up"></i> 8%</span></td>
                                <td>試點智慧倉儲</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-xl-7">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center">
                    <h5 class="mb-0 fw-bold"><i class="fas fa-lightbulb me-2 text-warning"></i>策略洞察與建議</h5>
                    <button class="btn btn-sm btn-outline-secondary"><i class="fas fa-download me-1"></i>匯出報告</button>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="insight-card border-start border-4 border-primary p-3 h-100">
                                <h6 class="fw-bold text-primary mb-2"><i class="fas fa-bolt me-1"></i>自動化調整</h6>
                                <p class="text-muted mb-0 small">建議針對干擾值高於 50 的區域啟用自動頻道調整策略，提升訊號穩定度。</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="insight-card border-start border-4 border-success p-3 h-100">
                                <h6 class="fw-bold text-success mb-2"><i class="fas fa-battery-full me-1"></i>能源效率</h6>
                                <p class="text-muted mb-0 small">導入低功耗節點睡眠策略可降低 18% 耗電，延長電池壽命。</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="insight-card border-start border-4 border-warning p-3 h-100">
                                <h6 class="fw-bold text-warning mb-2"><i class="fas fa-shield-alt me-1"></i>安全防護</h6>
                                <p class="text-muted mb-0 small">強化 OT 安全稽核與 OTA 驗證機制，降低未授權韌體更新風險。</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="insight-card border-start border-4 border-info p-3 h-100">
                                <h6 class="fw-bold text-info mb-2"><i class="fas fa-users me-1"></i>協同效率</h6>
                                <p class="text-muted mb-0 small">提供跨部門協作看板與 API Webhook，可同步至維運工作流程。</p>
                            </div>
                        </div>
                    </div>
                    <div class="alert alert-primary mt-4 mb-0" role="alert">
                        <strong>版本 3 特點：</strong> 以洞察分析為核心，適合展示資料科學與管理決策面向的 LoRa 方案想像。
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <style>
        .lora-v3 {
            background: radial-gradient(circle at top, rgba(93, 135, 255, 0.15), transparent 55%), #f8fbff;
            padding-bottom: 2.5rem;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(12px);
        }

        .stat-chip {
            background: #fff;
            border-radius: 0.85rem;
            padding: 0.75rem 1rem;
            min-width: 120px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(20, 53, 137, 0.08);
        }

        .stat-chip .label {
            font-size: 0.75rem;
            color: #6c757d;
            display: block;
        }

        .stat-chip .value {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .heatmap-placeholder {
            height: 320px;
            border-radius: 1rem;
            background: linear-gradient(135deg, rgba(30, 60, 114, 0.15), rgba(42, 82, 152, 0.1));
            border: 1px dashed rgba(42, 82, 152, 0.35);
            position: relative;
            overflow: hidden;
        }

        .heatmap-placeholder::before,
        .heatmap-placeholder::after {
            content: "";
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(46, 204, 113, 0.45) 0%, rgba(46, 204, 113, 0) 70%);
            width: 180px;
            height: 180px;
        }

        .heatmap-placeholder::before {
            top: 40px;
            left: 50px;
        }

        .heatmap-placeholder::after {
            bottom: 20px;
            right: 60px;
            background: radial-gradient(circle, rgba(231, 76, 60, 0.45) 0%, rgba(231, 76, 60, 0) 70%);
        }

        .legend-dot {
            display: inline-block;
            width: 0.75rem;
            height: 0.75rem;
            border-radius: 50%;
            margin-right: 0.35rem;
        }

        .life-cycle li {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.85rem;
        }

        .life-cycle .stage {
            width: 90px;
            font-weight: 600;
            color: #495057;
        }

        .life-cycle .ratio {
            width: 45px;
            text-align: end;
            font-weight: 600;
            color: #6c757d;
        }

        .insight-card {
            background: #fff;
            border-radius: 0.85rem;
            box-shadow: 0 0.5rem 1.5rem rgba(15, 61, 145, 0.08);
        }

        .insight-card h6 {
            font-size: 0.95rem;
        }
    </style>
}
